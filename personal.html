<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign in — AI Résumé Rewriter</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Page-specific tweaks for a sleek login card */
    .login-wrapper { min-height: calc(100vh - 160px); display:flex; align-items:center; justify-content:center; padding:40px 20px; }
    .login-card { width:100%; max-width:720px; padding:36px; border-radius:14px; }
    .login-card h2 { margin:0 0 8px; font-size:1.5rem; }
    .login-card p.lead { margin:0 0 18px; color:rgba(255,255,255,0.8); }
    .form-row { display:flex; gap:12px; }
    .form-row .col { flex:1; }
    .login-card label { display:block; font-size:0.85rem; margin-bottom:6px; opacity:0.85; }
    .login-card input { padding:14px; font-size:1rem; border-radius:10px; }
    .action-row { display:flex; gap:12px; margin-top:18px; align-items:center; }
    .muted { opacity:.7; font-size:0.9rem }
    @media(max-width:640px){ .form-row{ flex-direction:column } }
  </style>
</head>
<body>

<script>
// If already logged in, send the user to the nav page directly
try {
  const logged = localStorage.getItem('loggedIn');
  if (logged === '1') {
    window.location.replace('nav.html');
  }
} catch (e) { /* ignore */ }
</script>

<header class="hero">
  <div class="glow-orb"></div>
  <h1 class="title">AI Résumé Rewriter</h1>
  <p class="subtitle">Personalize your résumé experience — quick sign in, no password.</p>
</header>

<div class="login-wrapper">
  <div class="glass login-card">
    <h2>Welcome</h2>
    <p class="lead">Enter your full name and email to get personalized rewrites and save your session locally.</p>

    <div class="form-row">
      <div class="col">
        <label for="nameInput">Full name</label>
        <input id="nameInput" type="text" placeholder="Jane Doe" autocomplete="name">
      </div>
      <div class="col">
        <label for="titleInput">Professional title</label>
        <input id="titleInput" type="text" placeholder="Product Manager" autocomplete="organization-title">
      </div>
    </div>

    <div style="margin-top:12px;">
      <label for="emailInput">Email</label>
      <input id="emailInput" type="email" placeholder="you@example.com" autocomplete="email">
    </div>

    <div class="action-row">
      <button id="continueBtn" class="glow-btn">Continue</button>
      <button id="guestBtn" class="action-btn secondary">Continue as Guest</button>
      <a id="viewLast" href="result.html" class="muted">View last result</a>
    </div>

    <p class="muted" style="margin-top:12px">We only store data locally in your browser for convenience — no password required.</p>
  </div>
</div>

<script src="script.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const nameInput = document.getElementById('nameInput');
  const titleInput = document.getElementById('titleInput');
  const emailInput = document.getElementById('emailInput');
  const continueBtn = document.getElementById('continueBtn');
  const guestBtn = document.getElementById('guestBtn');

  // preload saved data if present
  try {
    const saved = JSON.parse(localStorage.getItem('resumeData') || 'null');
    if (saved) {
      if (saved.name) nameInput.value = saved.name;
      if (saved.title) titleInput.value = saved.title;
      if (saved.email) emailInput.value = saved.email;
    }
  } catch (e) { /* ignore */ }

  function finishSignIn(name, title, email) {
    let data = {};
    try { data = JSON.parse(localStorage.getItem('resumeData') || '{}'); } catch (e) { data = {}; }
    if (name) data.name = name;
    if (title) data.title = title;
    if (email) data.email = email;
    try { localStorage.setItem('resumeData', JSON.stringify(data)); } catch (e) { console.warn(e); }
  try { localStorage.setItem('loggedIn', '1'); } catch (e) { }
  window.location.href = 'nav.html';
  }

  continueBtn.addEventListener('click', () => {
    const name = nameInput.value.trim();
    const title = titleInput.value.trim();
    const email = emailInput.value.trim();
    if (!name || !email) { alert('Please enter your name and email.'); return; }
    finishSignIn(name, title, email);
  });

  guestBtn.addEventListener('click', () => {
    // mark as logged in as guest but do not save personal info
  try { localStorage.setItem('loggedIn', '1'); } catch (e) {}
  window.location.href = 'nav.html';
  });
});
</script>
